<div class="max-w-md mx-auto mt-10 p-6 bg-white rounded-lg shadow-md">

    <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">Parking Lot Register Form</h2>
    <form form="#ngForm" (ngSubmit)="onSubmit()">
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2">Parking Lot Name</label>
            <input type="text"
            class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
            [class.border-red-500]="validationErrors['name']"
            placeholder="Enter Parking Lot Name"
            name="name"
            [(ngModel)]="parkinglot.name"
            required            
            />
            @if (validationErrors['name']) {
              <p class="text-red-500 text-sm mt-1">{{ validationErrors['name'] }}</p>
            }
        </div>
         <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2">Parking Location</label>
            <input type="text"
            class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
            [class.border-red-500]="validationErrors['location']"
            placeholder="Enter Parking Lot Location"
            name="location"
            [(ngModel)]="parkinglot.location"
            required            
            />
            @if (validationErrors['location']) {
              <p class="text-red-500 text-sm mt-1">{{ validationErrors['location'] }}</p>
            }
        </div>
         <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2">Parking Total Slots</label>
            <input type="number"
            class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
            [class.border-red-500]="validationErrors['totalSlots']"
            placeholder="Enter Parking Lot Slots"
            name="totalslots"
            [(ngModel)]="parkinglot.totalSlots"
            required            
            />
            @if (validationErrors['totalSlots']) {
              <p class="text-red-500 text-sm mt-1">{{ validationErrors['totalSlots'] }}</p>
            }
        </div>
         <div class="mb-6">
            <label class="block text-gray-700 text-sm font-bold mb-2">Base Price per hour</label>
            <input type="number"
            class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
            [class.border-red-500]="validationErrors['basePricePerHour']"
            placeholder="Enter Base Price"
            name="basePricePerHour"
            [(ngModel)]="parkinglot.basePricePerHour"
            required            
            />
            @if (validationErrors['basePricePerHour']) {
              <p class="text-red-500 text-sm mt-1">{{ validationErrors['basePricePerHour'] }}</p>
            }
        </div>
            <div class="flex gap-4">
                <button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">Submit Button</button>
    
                <button (click)="onBack()" type="button" class="bg-gray-800 hover:bg-gray-900 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-gray-500">Back Button</button> </div>
    </form>
</div>

@defer (on timer(1s)) {
<div class="max-w-4xl mx-auto mt-10 bg-white rounded-lg shadow-md overflow-hidden pb-5">
    <h2 class="text-2xl font-bold p-6 text-gray-800 border-b">Registered Parking Lots</h2>
    <div class="overflow-x-auto">
        <table class="min-w-full bg-white">
            <thead class="bg-gray-800 text-white">
                <tr>
                    <th class="py-3 px-4 uppercase font-semibold text-sm text-left">Name</th>
                    <th class="py-3 px-4 uppercase font-semibold text-sm text-left">Location</th>
                    <th class="py-3 px-4 uppercase font-semibold text-sm text-left">Slots</th>
                    <th class="py-3 px-4 uppercase font-semibold text-sm text-left">Price/Hr</th>

                    <th class="py-3 px-4 uppercase font-semibold text-sm text-left"></th>
                </tr>
            </thead>
            <tbody class="text-gray-700" *ngIf="parkingLots && parkingLots.length > 0; else noData">
                <tr *ngFor="let lot of parkingLots" class="border-b hover:bg-gray-100">
                    <td class="py-3 px-4 text-left">{{ lot.name }}</td>
                    <td class="py-3 px-4 text-left">{{ lot.location }}</td>
                    <td class="py-3 px-4 text-left">{{ lot.totalSlots }}</td>
                    <td class="py-3 px-4 text-left">{{ lot.basePricePerHour }}</td>
                     <td class="py-3 px-4 text-left"><button class="bg-green-500 rounded-2xl p-2.5 border-2 text-white border-black" type="button" (click)="event(lot.id)" >See Details</button></td>
                </tr>
            </tbody>
            <ng-template #noData>
                <p class="p-6 text-center">No parking lots available</p>
            </ng-template>
        </table>
    </div>
</div>
} @placeholder {
    <p class="text-center mt-10 text-gray-500">Loading parking lots table...</p>
}
