<div class="fixed inset-0 bg-white bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl p-6 max-h-screen overflow-y-auto">

    <h2 class="text-xl font-bold mb-4 text-center text-gray-800">
      Parking Lot Data
    </h2>
    @defer(on timer(1s))
    {
    <div *ngFor="let lot of parkingLotInfo" class="space-y-4 text-gray-700">
      <!-- Parking Lot Info Section -->
      <div class="border-b pb-4">
        <p><strong>Parking Lot Name:</strong> {{ lot.parkingLotName }}</p>
        <p><strong>Parking slots Active:</strong> {{ lot.activeSessions }}</p>
        <p><strong>Occupied Slots:</strong> {{ lot.occupiedSlots }}</p>
        <p><strong>Total Slots:</strong> {{ lot.totalSlots }}</p>
        <p><strong>Base Price of Lot:</strong> ₹{{ lot.basePricePerHour }}</p>
        <p><strong>Occupancy Percentage:</strong> {{ lot.occupancyPercentage }}%</p>
        <p class="text-lg font-bold">
          Revenue:
          @if(lot.totalRevenue<=0) { No collections yet } @else { ₹{{ lot.totalRevenue }} }
        </p>
        <p class="text-lg font-bold">
          Revenue for today:
          @if(lot.revenueToday<=0) { No collections yet } @else { ₹{{ lot.revenueToday }} }
        </p>
      </div>

      <!-- Deactivate/Reactivate Button -->
      <div class="flex justify-end gap-4">
        @if(!lot.deleted)
        {
        <button class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded"
          (click)="onDelete(lot.parkingLotId)">
          Deactivate Parking Lot
        </button>
        }
        @else {
        <button class="bg-black hover:bg-gray-800 text-white px-4 py-2 rounded"
          (click)="onReactivate(lot.parkingLotId)">
          Reactivate Parking Lot
        </button>
        }
      </div>

      <!-- Parking Slots Section -->
      <div class="border-t pt-4">
        <h3 class="text-lg font-bold mb-4 text-gray-800">Parking Slots Status</h3>
        <div class="grid grid-cols-2 gap-3">
          <div *ngFor="let slot of parkingSlots; let i = index" class="flex flex-col gap-2">
            <label class="font-semibold">Slot {{ slot.slotNumber }}</label>
            @if(slot.status==='AVAILABLE')
            {
            <button class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded text-sm"
              (click)="onChangeSLotStatus(slot.id,'INACTIVE')">
              Make Unavailable
            </button>
            }
            @else if(slot.status==='INACTIVE')
            {
            <button class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-2 rounded text-sm"
              (click)="onChangeSLotStatus(slot.id,'AVAILABLE')">
              Make Available
            </button>
            }
            @else {
              <p class="text-red-500 font-semibold">{{ slot.status }}</p>
            }
          </div>
        </div>
      </div>
    </div>
    }
    @loading {
    <p class="text-center text-gray-600">Loading...</p>
    }
    @placeholder {
    <p class="text-center text-gray-600">No Data</p>
    }

    <!-- Exit Button -->
    <div class="flex justify-end gap-4 mt-6 border-t pt-4">
      <button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded" (click)="onBack()">
        Confirm Exit
      </button>
    </div>

  </div>
</div>